<div class="page-center">
  <div class="login-container">

    <h2 *ngIf="step==='email'">Digite seu email</h2>
    <form *ngIf="step==='email'" [formGroup]="emailForm" (ngSubmit)="sendEmail()">
      <input
        type="email"
        formControlName="email"
        placeholder="Email"
      />
      <button
        type="submit"
        class="submit-btn"
        [disabled]="loading || !emailForm.valid"
      >
        {{ loading ? 'Enviando...' : 'Enviar código' }}
      </button>
    </form>

    <h2 *ngIf="step==='code'">Digite o código</h2>
    <form *ngIf="step==='code'" [formGroup]="codeForm" (ngSubmit)="verifyCode()">
      <input
        type="text"
        formControlName="code"
        placeholder="Código de 6 dígitos"
      />
      <button
        type="submit"
        class="submit-btn"
        [disabled]="loading || !codeForm.valid"
      >
        {{ loading ? 'Validando...' : 'Validar código' }}
      </button>
    </form>

    <p *ngIf="step==='code' && !canResend">
      Não recebeu o código? Reenviar em {{ timer }}s
    </p>

    <button
      *ngIf="step==='code' && canResend"
      type="button"
      class="submit-btn"
      [disabled]="loading"
      (click)="resendCode()"
    >
      {{ loading ? 'Enviando...' : 'Reenviar código' }}
    </button>

    <h2 *ngIf="step==='reset'">Nova senha</h2>
    <form *ngIf="step==='reset'" [formGroup]="resetForm" (ngSubmit)="resetPassword()">
      <input
        type="password"
        formControlName="senha"
        placeholder="Nova senha"
      />
      <input
        type="password"
        formControlName="confirmar"
        placeholder="Confirmar senha"
      />
      <button
        type="submit"
        class="submit-btn"
        [disabled]="loading || !resetForm.valid"
      >
        {{ loading ? 'Salvando...' : 'Salvar senha' }}
      </button>
    </form>

    <p class="error" *ngIf="error">{{ error }}</p>

  </div>
</div>
